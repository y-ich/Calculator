((function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;try{document.createEvent("TouchEvent"),y="touchstart",x="touchend"}catch(A){y="mousedown",x="mouseup"}l={source:new Audio("sounds/click.aiff"),firstTime:!0,play:function(){var a=this;return this.source.play(),this.timer=setTimeout(function(){return a.source.pause()},1300),this.play=function(){return setTimeout(function(){return l.aux()},0)}},aux:function(){var a=this;clearTimeout(this.timer);try{this.source.readyState>=this.source.HAVE_METADATA&&(this.source.currentTime=1);if(this.source.readyState>=this.source.HAVE_FUTURE_DATA)return this.source.play(),this.timer=setTimeout(function(){return a.source.pause()},300)}catch(b){return console.log(b.message)}}},k=function(){return(typeof orientation!="undefined"&&orientation!==null?orientation:90)%180===0},s=function(a){var b,c,d;c="";for(b=1,d=a.length;1<=d?b<=d:b>=d;1<=d?b++:b--)c+=a.charAt(a.length-b);return c},t=function(a,b){var c,d,e;d=[];for(c=0,e=b.length;0<=e?c<e:c>e;c+=a)d.push(b.slice(c,c+a));return d},o=function(a){var b,c,d,e,f,g;b=[1,-0.5,1/6,0,-1/30,0,1/42,0,-1/30,0,5/66,0,-691/2730,0,7/6,0,-3617/510,0,43867/798,0,-174611/330],c=10,f=1,g=a;while(g<c)f*=g,g++;e=-Math.log(f)+(g-.5)*Math.log(g)-g+.5*Math.log(2*Math.PI);for(d=2;d<=c;d+=2)e+=b[d]/(d*(d-1)*Math.pow(g,d-1));return e},i=function(a){var b;return b=Math.exp(o(a)),Math.floor(a)===a?Math.floor(b):b},z=function(a){return function(b){return parseFloat(a(b*(c==="Deg"?2*Math.PI/360:1)).toFixed(15))}},j=function(a){return function(b){return a(b)/(c==="Deg"?2*Math.PI/360:1)}},v=function(a){var b;return b=Math.tan(a),Math.abs(b)<15e15?b:NaN},h={mr:function(){return p},pi:function(){return Math.PI},random:Math.random,percent2number:function(a){return a/100},inverse:function(a){return 1/a},square:function(a){return Math.pow(a,2)},cube:function(a){return Math.pow(a,3)},power:Math.pow,factorial:function(a){return i(a+1)},root:function(a){return Math.pow(a,.5)},xthroot:function(a,b){return Math.pow(a,1/b)},log:function(a){return Math.log(a)},log10:function(a){return Math.log(a)/Math.log(10)},log2:function(a){return Math.log(a)/Math.log(2)},sin:z(Math.sin),cos:z(Math.cos),tan:z(v),sinh:function(a){return(Math.exp(a)-Math.exp(-a))/2},cosh:function(a){return(Math.exp(a)+Math.exp(-a))/2},tanh:function(a){return parseFloat((h.sinh(a)/h.cosh(a)).toFixed(15))},exp:Math.exp,pow2:function(a){return Math.pow(2,a)},enotation:function(a,b){return a*Math.pow(10,b)},add:function(a,b){return a+b},sub:function(a,b){return a-b},mul:function(a,b){return a*b},div:function(a,b){return a/b},asin:j(Math.asin),acos:j(Math.acos),atan:j(Math.atan),asinh:function(a){return Math.log(a+Math.sqrt(a*a+1))},acosh:function(a){return Math.log(a+Math.sqrt(a*a-1))},atanh:function(a){return parseFloat((Math.log((1+a)/(1-a))/2).toFixed(15))}},p=0,c="Deg",w={content:"0",val:function(a){return a!=null?a===""||/\..*\./.test(a)?null:(this.content=a,this.changed(),this.content):this.content},add:function(a){var b;b=this.val().replace(/[\-,\.]/g,"").length;if(b>=g.maxDigits()||/e/.test(g.text()))return;return this.added(),this.val(this.content!=="0"||a!=="0"&&!!/\./.test(a)?this.content+a:a)},toggleSign:function(){return this.val(this.content[0]==="-"?this.content.slice(1):"-"+this.content)},changed:function(){return g.bywhom=this,g.update(this.content)},clear:function(){return this.content="0"},added:function(){return a()}},m={content:0,val:function(a){return a!=null?(this.content=a,this.changed(),this.content):this.content},changed:function(){return g.bywhom=this,g.update(this.content)},toggleSign:function(){return this.val(-this.val())}},u=[],r={"=":0,"(":0,")":0,add:1,sub:1,mul:2,div:2},n=null,e=function(){return u=[]},q=function(a,b){var c,d,e;switch(a){case"(":return u.push("(");case")":m.val(b);for(;;){c=u.pop();if(c==null||c==="(")return;m.val(h[c](u.pop(),m.val()))}break;case"=":n=null,m.val(b);for(;;){c=u.pop();if(c==null)return;c!=="("&&(m.val(h[c](u.pop(),m.val())),n==null&&(n=function(a,b){return function(c){return h[a](c,b)}}(c,b)))}break;default:return u.length!==0&&((d=r[a])!=null?d:3)<=((e=r[u[u.length-1]])!=null?e:3)?(m.val(h[u.pop()](u.pop(),b)),u.push(m.val(),a)):u.push(b,a)}},$(document.body).bind("touchmove",function(a){return a.preventDefault()}),$(".key").each(function(){var a;a=$(this);if($(this).data("role")==null)return a.data("role",a.text())}),$("#clear").bind(x,function(a){return $(this).data("role")==="allclear"?(n=null,e(),f($(".binary"))):b($('.binary[data-role="'+u[u.length-1]+'"]')),w.clear(),m.val(0),d()}),$("#pi").bind(x,function(){return a()}),$(".number").bind(x,function(){return w.add($(this).data("role").toString())}),$(".number, #pi").bind(x,function(){return f($(".binary"))}),$("#period").bind(x,function(){if(!/\./.test(w.val()))return w.add($(this).data("role"))}),$("#plusminus").bind(x,function(){return g.bywhom===w?w.toggleSign():g.update(-g.val())}),$("#mc").bind(x,function(){return p=0,f($("#mr"))}),$("#mplus").bind(x,function(){return w.clear(),p+=g.val(),b($("#mr"))}),$("#mminus").bind(x,function(){return w.clear(),p-=g.val(),b($("#mr"))}),$(".nofix").bind(x,function(){return g.bywhom="nofix",g.update(h[$(this).data("role")]().toString()),w.clear()}),$(".unary").bind(x,function(){return n=h[$(this).data("role")],g.bywhom="unary",g.update(n(g.val()).toString()),w.clear()}),$(".binary").bind(x,function(){return f($(".binary")),b($(this))}),$(".binary, #parright").bind(x,function(){return q($(this).data("role"),g.val()),w.clear()}),$("#parleft").bind(x,function(){return q($(this).data("role")),w.clear()}),$("#equal_key").bind(x,function(){if(u.length!==0)return q($(this).data("role"),g.val()),w.clear();if(n!=null)return g.bywhom="equal_key",g.update(n(g.val()).toString())}),$("#angle_key").bind(x,function(){var a;return a=$(this),c==="Deg"?(c="Rad",a.html(a.html().replace("Rad","Deg"))):(c="Deg",a.html(a.html().replace("Deg","Rad"))),$("#angle").text(c)}),$("#second").bind(x,function(){return $(this).data("status")==="off"?($(this).data("status","on"),$(this).css("color","#de8235"),$(".key.double").each(function(){var a,b;a=$(this);switch(a.data("role")){case"log":return a.data("role","log2"),a.html(a.html().replace("ln","log<sub>2</sub>"));case"exp":return a.data("role","pow2"),a.html(a.html().replace("e","2"));default:return b=a.data("role"),a.data("role","a"+b),a.html(a.html().replace(b,b+"<sup>-1</sup>"))}})):($(this).data("status","off"),$(this).css("color",""),$(this).removeClass("pushed"),$(".key.double").each(function(){var a,b;a=$(this);switch(a.data("role")){case"log2":return a.data("role","log"),a.html(a.html().replace("log<sub>2</sub>","ln"));case"pow2":return a.data("role","exp"),a.html(a.html().replace("2","e"));default:return b=a.data("role"),a.data("role",b.slice(1)),a.html(a.html().replace("<sup>-1</sup>",""))}}))}),$("#backstage").bind("touchEnd",function(){return $(document.body).append($('<script src="http://localhost/~yuji/safari-park/console.js">'))}),$(".key").bind(y,function(){return $(this).addClass("pushed"),l.play()}),$(".key:not(#second)").bind(x,function(){return $(this).removeClass("pushed")}),$(".key").bind("touchcancel",function(){return $(this).removeClass("pushed")}),$(window).bind("orientationchange",function(){return g.update()}),a=function(){return $("#clear").data("role","clear"),$("#clear").html($("#clear").html().replace("AC","C"))},d=function(){return $("#clear").data("role","allclear"),$("#clear").html($("#clear").html().replace(">C",">AC"))},b=function(a){var b;b=a.children(".active");if(b==null||b.length===0)return a.append($('<div class="active">'))},f=function(a){return a.children(".active").remove()},g={content:"0",bywhom:null,width:function(){return innerWidth<=480?k()?280:406:k()?671:875},fontSize:function(){return innerWidth<=480?k()?"78px":"50px":k()?"182px":"108px"},val:function(){return parseFloat(this.content)},text:function(){return $("#view").text()},maxDigits:function(){return k()?9:16},maxSignificants:function(){return k()?8:14},update:function(a){var b,c,d,e,f,h,i,j,k,l,m;a!=null?this.content=a:a=this.content,b=$("#view"),f=this.content.toString(),/[0-9]/.test(f)&&(/e/.test(f)?(k=f.split("e"),h=k[0],d=k[1],h.replace(".","").length>g.maxSignificants()&&(f=parseFloat(f).toExponential(g.maxSignificants()))):(l=f.split("."),i=l[0],c=l[1],f[0]==="-"&&(i=i.slice(1)),i.length+(c!=null?c:"").length<=this.maxDigits()?(j=s(t(3,s(i)).join(",")),c!=null&&(j+="."+c),f=(f[0]==="-"?"-":"")+j):parseFloat(f)===0?(j=i,c!=null&&(j+="."+c.slice(0,this.maxDigits()-1)),f=(f[0]==="-"?"-":"")+j):(e=parseFloat(f).toExponential(),m=e.split("e"),h=m[0],d=m[1],h.replace(/[\-\.]/,"").length>=g.maxDigits()?(j=i,c!=null&&(j+="."+c.slice(0,this.maxDigits()-1)),f=(f[0]==="-"?"-":"")+j):f=e))),b.css("visibility","hidden"),b.text(f),b.css("font-size",g.fontSize());while(!(b[0].offsetWidth<=g.width()))b.css("font-size",parseInt(b.css("font-size"))-1+"px");return b.css("visibility","")}},applicationCache.addEventListener("checking",function(){return console.log("Checking update...")}),applicationCache.addEventListener("noupdate",function(){return console.log("No update.")}),applicationCache.addEventListener("downloading",function(){return console.log("Downloading newer version...")}),applicationCache.addEventListener("progress",function(){return console.log(".")}),applicationCache.addEventListener("cached",function(){return console.log("Cached.")}),applicationCache.addEventListener("updateready",function(){return console.log("Updateready.")}),applicationCache.addEventListener("error",function(){return console.log("applicationCache error")})})).call(this);